{% extends "layouts/base.html" %} {% block title %}Meeting{% endblock %} {%
block head %}
<style>
	body,
	html {
		height: 100%;
		margin: 0;
		background: #111;
		color: #fff;
		font-family: system-ui;
		display: block;
	}
	.top-bar {
		padding: 12px;
		background: #222;
		display: flex;
		justify-content: space-between;
		align-items: center;
	}
	.iframe-wrap {
		height: calc(100% - 45px);
	}
	iframe {
		width: 100%;
		height: 100%;
		border: 0;
	}
	.meeting-info {
		padding: 20px;
		color: #fff;
	}
</style>
{% endblock %} {% block body %}
<div class="top-bar">
	<div>
		<strong>Appointment:</strong> {{ appointment.scheduled_at.strftime('%Y-%m-%d
		%I:%M %p') }}
		<span style="margin-left: 20px"
			><strong>Doctor:</strong> {{ appointment.doctor_name or '' }}</span
		>
		<span style="margin-left: 20px"
			><strong>Patient:</strong> {{ appointment.user_name or '' }}</span
		>
	</div>
	<div>
		<a
			href="{{ url_for('user_dashboard') if user_role == 'patient' else url_for('doctor_dashboard') }}"
			style="color: var(--accent-pink); text-decoration: none"
			>Back to Dashboard</a
		>
	</div>
</div>
<div class="iframe-wrap">
	{% if appointment.meeting_url %}
	<iframe
		src="{{ appointment.meeting_url }}"
		allow="camera;microphone;fullscreen"
		title="Meeting"></iframe>
	<div class="meeting-info">
		<p>
			<strong>Meeting Link:</strong>
			<a
				href="{{ appointment.meeting_url }}"
				target="_blank"
				style="color: var(--accent-purple)"
				>{{ appointment.meeting_url }}</a
			>
		</p>
		<p>
			Having trouble?
			<a
				href="{{ appointment.meeting_url }}"
				target="_blank"
				style="color: var(--accent-green)"
				>Open in new tab</a
			>
		</p>
	</div>
	{% else %}
	<div style="padding: 20px">
		No meeting URL is available for this appointment.
	</div>
	{% endif %}
</div>
{% endblock %}
